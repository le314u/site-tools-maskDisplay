<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IP Visualizer</title>
<style>
  * { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI', sans-serif;}
  body { display:flex; justify-content:center; align-items:center; height:100vh; transition: background-color 0.3s, color 0.3s;}

  :root {
    --bg:#f0f0f0; --text:#222;
    --input-bg:#fff; --input-text:#222;
    --btn-bg:#222; --btn-text:#fff;
  }
  [data-theme="dark"] {
    --bg:#121212; --text:#eee;
    --input-bg:#1e1e1e; --input-text:#eee;
    --btn-bg:#eee; --btn-text:#121212;
  }

  body { background-color: var(--bg); color: var(--text); }

  .container {
    background-color: var(--bg);
    padding:2rem; border-radius:12px;
    box-shadow:0 4px 20px rgba(0,0,0,0.1);
    display:flex; flex-direction:column; gap:1rem; width:360px;
  }

  input { padding:.8rem; border-radius:6px; border:1px solid #ccc; background-color:var(--input-bg); color:var(--input-text); font-size:1rem;}
  input:focus { outline:none; border-color:#007BFF; }

  button { padding:.8rem; border:none; border-radius:6px; background-color:var(--btn-bg); color:var(--btn-text); cursor:pointer; font-size:1rem;}
  button:hover { opacity:.9; }

  .toggle-btn { background:none; border:1px solid var(--text); color:var(--text); margin-top:.5rem; }

  .label { font-size:0.85rem; color: var(--text); margin-top:0.5rem; }

  .octeto-row { display:flex; align-items:center; gap:10px; font-family:monospace; }
  .bit { width:18px; text-align:center; border-radius:4px; padding:2px; margin:1px; }
  .network { background-color:#2ecc71; color:#fff; } /* verde = rede */
  .host { background-color:#e74c3c; color:#fff; } /* vermelho = host */
  .decimal { width:40px; text-align:center; font-weight:bold; }

  .error { color:#e74c3c; font-size:0.9rem; }
</style>
</head>
<body data-theme="light">
  <div class="container">
    <h2>IP Visualizer</h2>
    <input type="text" id="ipInput" placeholder="Ex: 192.168.0.1/24">
    <button onclick="processIP()">Visualizar</button>

    <div class="label">Octetos do IP (Verde = Rede, Vermelho = Host)</div>
    <div id="octetosIP"></div>
    
    <div class="error" id="error"></div>
    <button class="toggle-btn" onclick="toggleTheme()">ðŸŒ™ Mudar Tema</button>
  </div>

<script>
function toggleTheme() {
  const body = document.body;
  body.setAttribute('data-theme', body.getAttribute('data-theme') === 'light' ? 'dark' : 'light');
}

function processIP() {
  const input = document.getElementById('ipInput').value.trim();
  const container = document.getElementById('octetosIP');
  const error = document.getElementById('error');

  container.innerHTML = '';
  error.textContent = '';

  const match = input.match(/^(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})\/(\d{1,2})$/);
  if(!match) { error.textContent = 'Formato invÃ¡lido. Ex: 192.168.0.1/24'; return; }

  const ip = match[1].split('.').map(Number);
  const maskLen = Number(match[2]);
  if(ip.some(oct=>oct<0||oct>255) || maskLen<0||maskLen>32) { error.textContent='IP ou mÃ¡scara invÃ¡lidos'; return; }

  const binaryIP = ip.map(oct => oct.toString(2).padStart(8,'0'));

  // Para cada octeto, criar linha com bits coloridos + decimal
  for(let i=0;i<4;i++){
    const row = document.createElement('div');
    row.className = 'octeto-row';

    const oct = binaryIP[i];
    for(let j=0;j<8;j++){
      const span = document.createElement('span');
      span.className = 'bit ' + (i*8+j < maskLen ? 'network' : 'host');
      span.textContent = oct[j];
      row.appendChild(span);
    }

    // Adicionar valor decimal ao lado
    const decimalSpan = document.createElement('span');
    decimalSpan.className = 'decimal';
    decimalSpan.textContent = ip[i];
    row.appendChild(decimalSpan);

    container.appendChild(row);
  }
}
</script>
</body>
</html>
